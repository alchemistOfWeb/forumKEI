# forumKEI
> developed by Nikita Kuznetsov


* [1. Формулировка тз](#task_description)
* [2. Установка и настройка](#setup)
    * [1. Установка зависимостей](#dependences)
    * [2. Секретный ключ](#create_secret_key)
    * [3. Настройка базы данных](#setup_db)
    * [4. Миграции](#migrations)
    * [5. Предварительный парсинг всех продуктов](#scrap_sitemap)
    * [6. Для доступа к админке ](#admin_panel)
    * [7. Запуск тестового сервера](#test_server)
* [3. Описание функционала приложения](#description)
    * [Регистрация и вход](#auth)
    * [Пользователи](#users)
    * [Ссылки на все товары](#products)
    * [Список комментариев к товару](#opinions)


## 1. Формулировка тз:
<a name="task_description"></a> 


### Общие требования: 

* Написать сайт форума

* Профиль пользователя
    * [x] регистрация
    * [x] вход
    * [x] регистрация
    * [x] изменение данных профиля
    * [ ] изменение пароля
    * [ ] просмотр рейтинга (зависит лайков и дизов)
    * [ ] обзор на общее кол-во комментов сделанных на форуме

* [x] список разделов форума (главная страница)
* обзор открытых тем в разделе
    * поиск 
        * [ ] по названию
    * фильтрация 
        * [ ] по кол-ву комментариев
        * [ ] по дате создания
        * [ ] по статусу
        * [ ] по доступности
        * [ ] названию
        * [ ] тегам
    * показывать:
        * [x] кол-во комметариев
        * [x] дата создания
        * [x] статус (открыт/закрыт)
        * [ ] доступность (публичный/приватный/по рейтингу)
        * [ ] показывать необходимый рейтинг, если стои флаг доступности по рейтингу
        * [ ] автор (его никнейм)

* возможности гостя
    * [x] смотреть комментарии на топиках с публичным доступом.
* возможности пользователя. То же что и для гостя +
    * [x] добавлять комментарии в топике.
    * [ ] отвечать на др. комментарии.
    * [x] создавать новые топики.
* возможности для модератора. То же что и для пользователя +
    * [ ] блокировать комментарии в топиках
    * [ ] блокировать топик
    * [ ] блокировать пользователя с указанием причины блокировки

<br><br>

---
---
---
---

<br>  

## 2. Установка и настройка
<a name="setup"></a> 

### 1 Установка зависимостей
<a name="dependences"></a> 

Для начала установите python.
Установите npm версии выше 7.14

```bash
cd нужный каталог, где будет лежать код приложения
git clone https://github.com/alchemistOfWeb/forumKEI.git
cd forumKEI/django
pipenv # чтобы установить зависимости django
cd ../reactapp
npm install # чтобы установить зависимости для react
```


### 2 Секретный ключ
<a name="create_secret_key"></a> 

Для начала скопируйте файл .env.example и уберите строку `.example` из названия копии (оставьте только `.env`)

Создайте секретный ключ и добавьте в настройки соответствующими командами:
```bash
pipenv run python manage.py shell
>>> from django.core.management.utils import get_random_secret_key
>>> print(get_random_secret_key()) # скопируйте полученный командой ключ
>>> exit()
pipenv run dotenv set SECRET_KEY 'getted_secret_key' # сюда нужно вставить полученный ключ
```

### 3 Настройка базы данных
<a name="setup_db"></a> 

По умолчанию используется sqlite в качестве тестовой бд. Если хотите то вы можете установить свои настройки для бд в settings.py.

Информация о подключении к другим бд: https://docs.djangoproject.com/en/3.1/ref/databases/

### 4 Миграции
<a name="migrations"></a> 

Сделайте миграции в вашу бд
```bash
python manage.py makemigrations
python manage.py migrate
```


### 5 Для доступа к админке 
<a name="admin_panel"></a> 

```bash
python manage.py create superuser
name: ******* # придумайте, например admin
pas: ********** # придумайте, например admin
```

### 6 Запуск тестового сервера
<a name="test_server"></a> 

Запуск тестового сервера для бекенда
> ../django/
```bash
pipenv run python manage.py runserver
```

Тестовый сервер для фронтенда (запускайте из новой вкладки терминала)
> ../reactapp/
```bash
npm install
```

## 3. Описание функционала приложения
<a name="description"></a> 

### регистрация/вход
<a name="auth"></a> 

Регистрация, вход реализованы с помощью djoser.

### пользователи
<a name="users"></a> 

Cтандартно из коробки django

### Разделы
<a name="sections"></a>

Новый раздел можеть добавить только адмим в админке

### Поднятые темы
<a name="topics"></a>

Можно перейти и просмотреть комментарии.


### Комментариев(в теме)
<a name="opinions"></a>

Новые комментарии могут создавать только зарегистрированные и незаблокированные пользователи.
